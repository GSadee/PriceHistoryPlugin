{% import "@SyliusPriceHistoryPlugin/Shop/Common/Macro/money.html.twig" as money %}

{% set variant = product|sylius_resolve_variant %}
{% set has_discount = variant|sylius_has_discount({'channel': sylius.channel}) %}

<span class="ui header" id="product-original-price"{% if not has_discount %} style="display: none;"{% endif %} {{ sylius_test_html_attribute('product-original-price', money.calculateOriginalPrice(variant)) }}>
    {% if has_discount %}
        <del>{{ money.calculateOriginalPrice(variant) }}</del>
    {% endif %}
</span>
<span class="ui huge header" id="product-price" {{ sylius_test_html_attribute('product-price', money.calculatePrice(variant)) }}>
    {{ money.calculatePrice(variant) }}
</span>
{% if has_discount and variant|sylius_price_history_has_lowest_price({'channel': sylius.channel}) %}
    {% set lowest_price_before_discount = money.calculateLowestPrice(variant) %}
    {% set days = sylius.channel.lowestPriceForDiscountedProductsCheckingPeriod %}

    <div class="ui mini label" {{ sylius_test_html_attribute('product-lowest_price-before-the_discount', lowest_price_before_discount) }} style="white-space: nowrap; margin-top: 10px">
        {{ 'sylius_price_history.ui.the_lowest_price_days_before_the_discount_was'|trans({'%days%': days, '%price%': lowest_price_before_discount}) }}
    </div>
{% endif %}
